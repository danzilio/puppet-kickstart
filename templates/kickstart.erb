### THIS FILE WAS GENERATED BY PUPPET ###

<% if @commands && ! @commands.empty? -%>
# Command Section
  <%- @commands.each do |command,arguments| -%>
    <%- if arguments.is_a?(Array) -%>
      <%- arguments.each do |arg| -%>
<%= command %> <%= arg %>
      <%- end -%>
    <%- elsif arguments == true -%>
<%= command %>
    <%- elsif arguments != false -%>
<%= command %> <%= arguments %>
    <%- end -%>
  <%- end -%>
<% end -%>

<% if @repos && ! @repos.empty? -%>
# Package Repositories
  <%- @repos.each do |name, repo| -%>
repo --name <%= name %> <%= repo.map { |k,v| "--#{k} #{v}" }.join(' ') %>
  <%- end -%>
<% end -%>

<% if @partition_configuration && ! @partition_configuration.empty? -%>
# Partition Configuration
  <%- @partition_configuration.each do |command,arguments| -%>
    <%- if arguments.is_a?(Array) -%>
      <%- arguments.each do |arg| -%>
<%= command %> <%= arg %>
      <%- end -%>
    <%- elsif arguments == true -%>
<%= command %>
    <%- elsif arguments != false -%>
<%= command %> <%= arguments %>
    <%- end -%>
  <%- end -%>
<% end -%>

<% if @packages && ! @packages.empty? -%>
# Packages Section
%packages
  <%- @packages.each do |package| -%>
<%= package %>
  <%- end -%>
%end
<% end -%>

<% if @fragments && ! @fragments.empty? -%>
  <%- @fragments.each do |section, templates| -%>
%<%= section %>
    <%- templates.each do |template| -%>
########## BEGIN: <%= template %>
<%= scope.function_template([template]) %>
########## END: <%= template %>
    <%- end -%>
  <%- end -%>
%end
<% end -%>
